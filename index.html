<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<p>Choose a letter! (letters are chosen by hitting keys)</p>
	<p>Hit Enter for a new word</p>
	<p id="word">testing</p>

 	<!-- Hangman game -->
	<script type="text/javascript">
		// reset all letters
		// Player selects letter check
			// if letter isUsed (in the word) fill in the blank check
			// if notUsed (not in the word) hang a part 
			// After those remove letter from pool, redo this inputcheck

		var hangman = {
			// creation of variables
			letters: "abcdefghijklmnopqrstuvwxyz".split(""),
			usedLetters: [],
			words: ["oak", "ash", "hickory", "walnut", "aspen", "pine", "cherry", "balsa"],
			usedWords: [],
			userInput: "",
			currentWord: "",
			currentGuess: [],

			// functions

			// reset letters upon new word
			reset: function(){
				this.letters =  "abcdefghijklmnopqrstuvwxyz".split("");
				this.usedLetters = [];
			},

			// random whole number generators
			randomNumber: function(min, max) {
				return Math.floor(Math.random() * (max - min)) + min;
			},

			// this displays blanks for the number of letters in the word
			displayWord: function() {
				this.currentGuess = [];
				for (var i=0; i < this.currentWord.length; i++) {
					this.currentGuess.push("_");
				}
			},

			// selecting new word
			newWord: function() {
				this.reset();
				var stash = this.randomNumber(0, this.words.length);
				//The && is for making sure you dont use more words then you have
				if (this.words.length != 0 && stash > -1) {
					// reset currentWord
					this.currentWord = ""
					this.usedWords.push(this.words[stash]);
					// assign new currentWord
					this.currentWord = this.words[stash];
					// scraps word that has been used
					this.words.splice(stash, 1);
					this.displayWord();
				}
				else {
					alert("Ran out of words")
				}
			},

			// move the input key to the usedLetters array and take it out of the letters array
			pushLetter: function() {
				var stash = this.letters.indexOf(this.userInput);
				// This is for feedback testing
				// console.log(stash);
				if (stash > -1) {
					this.usedLetters.push(this.userInput);
					this.letters.splice(stash, 1);
				}
				// else if (this.usedLetters.indexOf(this.userInput) > -1) {
				// 	alert("You've used that letter before")
				// }

				// else {
				// 	alert("Please use a letter key")
				// }
			},

			// replace blanks with the correcct letter
			displayLetter: function() {
				for (var i=0; i < this.currentWord.length; i++) {
					// Trying to figure out how to find the second letter that is the same
					// || i===this.currentWord.indexOf(this.userInput, this.userInput.indexOf(i) + 1)
					if (i===this.currentWord.indexOf(this.userInput)) {
						this.currentGuess[i] = this.userInput;
					}
					else {
						this.pushLetter()
					}
				}
			},

			// This function is kind of broken  the goal is for when you finish a word it asks if you want to do another word.  If true get new word, else nothing.
			wordDone: function() {
				if (this.currentGuess.indexOf["_"] != -1){
					if (confirm("Congrats! want to play again?")) {
						this.newWord();
						}
				}
			},
		};
		// checks if DOM ready ?  Maybe I should do this
			// when key hit do this
		document.onkeyup = function(event){
			if (event.key == "Enter") {
				hangman.newWord()
				var content = document.getElementById('word');
				content.innerHTML = "<p>" + hangman.currentGuess + "</p>";
			}
			else{
				hangman.userInput = event.key;
				hangman.displayLetter();
				//Slow down push letter
				// hangman.pushLetter();
				// hangman.userInput = ""; testing to ensure letters are being stored

				var content = document.getElementById('word');
				content.innerHTML = "<p>" + hangman.currentGuess + "Used Letters - " + hangman.usedLetters + "</p>";
			}
		}

		// hangman.wordDone();
		// showing the current progress (dont know where to put it)
	</script>
</body>
</html>